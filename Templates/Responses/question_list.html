{% extends 'base.html' %}

{% block title %}Questions de l'enquête{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'CSS/question_list.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <h2>Questions pour l'enquête: {{ enquete.name }}</h2>
    <p>{{ enquete.description }}</p>
    
    <h3>Veuillez répondre aux questions suivantes:</h3>
    
    <ul class="questions-list">
    {% for question in questions %}
        <li class="question-item {% if question in answered_questions %}answered{% endif %}">
            <h4>{{ question.question }}</h4>
            <p>{{ question.description }}</p>
            <p>Type: {{ question.get_responseType_display }}</p>
            
            {% if question in answered_questions %}
                <span class="status completed">✓ Répondu</span>
            {% else %}
                <a href="{% url 'submit_response' enquete_response.id question.id %}" class="btn">Répondre</a>
            {% endif %}
        </li>
    {% endfor %}
    </ul>
    
    {% if questions.count == answered_questions.count %}
        <div class="completion-message">
            <h3>Vous avez répondu à toutes les questions!</h3>
            <p>Merci d'avoir complété cette enquête.</p>
        </div>
    {% endif %}
</div>
{% endblock %}